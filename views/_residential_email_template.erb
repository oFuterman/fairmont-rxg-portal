<%

# we need to change everything from att to fairmanage

mdu_config = CustomDataSet.find_by(name: 'fairmanage_mdu_data') || CustomDataSet.new
ssid             ||= (mdu_config.get(:ssid) || '').html_safe
signup_ssid      ||= (mdu_config.get(:signup_ssid) || '').html_safe
portal_url       ||= (mdu_config.get(:portal_url) || '').html_safe
portal_url_label ||= (mdu_config.get(:portal_url_label) || '').html_safe
phone            ||= (mdu_config.get(:phone) || '').html_safe
vendor           ||= (mdu_config.get(:vendor) || '').html_safe
address          ||= (mdu_config.get(:address) || '').html_safe
address2         ||= (mdu_config.get(:address2) || '').html_safe
city             ||= (mdu_config.get(:city) || '').html_safe
region           ||= (mdu_config.get(:region) || '').html_safe
zip              ||= (mdu_config.get(:zip) || '').html_safe
full_address     ||= "#{vendor}<br>#{address}#{"<br>#{@address2}" unless @address2.blank?}<br>#{city}, #{region}. #{zip}".html_safe
salutation       ||= []
order_info       ||= []
greeting         ||= 'Local Contact'
closing          ||= 'Thank you for choosing us, <br>FairManage'.html_safe
password         ||= password
login            ||= login
%>


<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type="text/css">
        * {
            font-family: AleckSans, Arial, Helvetica, sans-serif;
            color: #4A4A4A;
        }
        body {
            margin: 0;
        }
        a {
            text-decoration: underline;
        }
        .container {
            margin: auto;
            padding: 5px;
        }
        .message-text h2 {
            font-size: 18px;
        }
        .message-text p {
            font-size: 14px;
        }
        .row {
            display: block;
        }
        .row-text {
            background-color: #000;
            width: 100%;
            height: 230px;
        }
        .row-image {
            background-size: cover;
            width: 100%;
        }
        .row-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .row-text p {
            font-size: 24px;
            line-height: 26px;
            margin: 20px auto;
            padding-top: 20px;
            max-width: 95%;
        }
        .row-text a {
            color: white;
        }
        .footer-text {
                font-size: 12px;
                line-height: 14px;
        }
        .lg-show {
            display: none;
        }
        @media screen and (min-width: 540px) {
            .row {
                display: flex;
                flex-direction: row;
                justify-content: space-between;
                padding: 0;
                margin: auto;
            }
            .row-image, .row-text {
                width: 50%;
                height: 265px;
            }
            .row-text {
                margin-right: 10px;
                float: left;
            }
            .row-image {
                float: right;
            }
        }
        @media screen and (min-width: 768px) {
            .sm-show {
                display: none;
            }
            .lg-show {
                display: block;
            }
            .container, .row {
                max-width: 760px !important;
            }
            .message-text p {
                font-size: 18px;
                line-height: 20px;
            }
            .message-text h2 {
                font-size: 24px;
                line-height: 24px;
            }
            .row-image img {
                height: 265px;
            }
            .row-text p {
                line-height: 28px;
                width: 298px;
                height: 140px;
                max-width: 90%;
            }
        }
    </style>
  </head>
  <body>
    <main>
      <div class='container'>
          <img src='https://<%= DOMAIN_NAME %>/static/portal/fair/fairmont.png' alt="FairManage" height="54px" width="166px" />
      </div>
      <div class='container message-text'>
        <% unless salutation.empty? %>
          <p><%= salutation.reject { |s| s.empty? }.join('<br>').html_safe %></p>
        <% end %>
        <% unless order_info.empty? %>
          <p><%= order_info.reject { |o| o.empty? }.join('<br>').html_safe %></p>
        <% end %>
        <p>Hello <%= greeting %>,</p>
        <% if defined?(email_content) %>
          <%= email_content.html_safe %>
        <% else %>
          <h2>FairManage Email</h2>
          <p>No email content provided. If you received this email, please contact technical support.</p>
        <% end %>
        <p><%= closing %></p>
      </div>
      <div class="row">
        <div class="row-text">
          <p style="color: white;">
            For assistance with your FairManage Residential Broadband service, please visit <b><a href='https://<%= DOMAIN_NAME %>/portal/fair'><%= portal_url_label %></a></b>
            or call <%= phone %>
          </p>
        </div>
        <div class="row-image">
          <img src="https://<%= DOMAIN_NAME %>/static/portal/fair/513136711_email_1000px.jpg">
        </div>
      </div>
      <div style="clear: both;"></div>
    </main>
    <footer>
      <div class="container footer-text">
        <p>For support, please call <%= phone %></p>
        <br>
        <br>
        <p><b>Note:</b> This email message was auto-generated. Please do not respond.</p>
        <p class="sm-show">
            &copy; <%= Date.today.year %> FairManage Intellectual Property. All rights reserved. &#32;&#32;
        </p>
        <p class="lg-show">
            &copy; <%= Date.today.year %> FairManage Intellectual Property. All rights reserved.
        </p>

        <p>
          Your Login is: <b><%= login %></b>
        </p>
        <p>
          Your Password is: <b><%= password %></b>
        </p>
      </div>
    </footer>


    <script src="script.js"></script>
  </body>
</html>
